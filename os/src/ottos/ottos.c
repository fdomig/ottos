#include <stdlib.h>

#include <ottos/kernel.h>
#include <ottos/const.h>
#include <ottos/timer.h>

#include "../../bin/uptime_test.h"
#include "../../bin/i2c_test.h"
#include "../../bin/video_test.h"
#include "../drivers/i2c/i2c.h"

#include "kernel/intc/irq.h"
#include "kernel/pm/process.h"
#include "dev/devices.h"
#include "../hal/uart.h"

#include "../fs/fs.h"

#include "../fs/vfat/fat_filelib.h"
#include "../../drivers/mmchs/mmchs.h"

#include "kernel/mmu/mmu.h"
#include "../lib/ottos/parser.h"
#include "kernel/loader/loader.h"

void devices_test() {
	devices_init();
}

static void loop_forever() {
  for (;;)
    ;
}

void i2c_test() {
  //devices_init();

	i2c_init();
	pulse_leds();
}

void mmu_test() {
	devices_init();
	irq_enable();

	mmu_init();

	process_table_init();
	//process_create(1, (int) toggle_led1);
	//process_create(1, (int) toggle_led2);

	irq_init();
	timer_init();
	irq_register_context_switch();

	kernel_to_user_mode();
}

// PRINT TEST
//#define print_byte0 ":020000040002F8:20000000000029F090012D8C01087C0104003B0400FBF0110403070403040404FB04030194:200080000101FB0304020400EA1EFFFF7814010000000427FF3000B2000C04000408000398:2001000004005CB20100240484EF30010014040E011C2014001E0C001E1EC8C40E78000011:200180009EE40400080008080008080C0400080108008C080CF1901B00190417FE44696510:200200006C6565202066726E726464656C776557206462682020656174612065486F720D00:20028000001E01032B032F10081010181810FB1010010C0D0C1003040401060808010208E9:200300000801010402010101B2B20100B2B20101010101010103F9011302CB040704B42337:20038000B204F9040102B2B202010101010409040423032302230104F50401010101FB01BC:200400000100010100FB1E1000003C040400000004000004EC00E8003C00CC0000090C0C67:200480000500040405041E040000F2001E8010000C0010000A000405000004000306020442:20050000000004F000041070001812000000B7F0003C070304E000FF0000D803003C0070E2:200580000304F405B406080506040400BF00000100003C0470700060700000008938003CD9:2006000030040C030007030001000403F8FF03040036F081000131000100040405000000A0:200680008C0000008C00000A0006056D00000C040003140006066200000C0409065B055953:2007000000000C000C08060063003C70F00004000103017200560000029A00F0000027B080:20078000003C00B407860304003201093E092F7C84000601040004168C140C0904101A0813:20080000030100070013010005040400051E1B0835000008070688075B003C05B63CBA093C:200880000809010005040401000449003C07F0F000010131046802050003010A003D0000D7:20090000C528003C070304182000050016040A000C04070C09080103070C08FA00040200EC:20098000EB010003003C00F0B001070004020A00BB08000C0003090400B2003C07F0109010:200A000004C4000010032100100104FC10C400BCB8C0C8FC0C00380229040401070060001E:200A8000000442044E0C2F2F69000800515100004D52000100000108080045005500010DE8:200B00000000080F04000008000C1100EA0C0C011104080C0A010B04080014010500CA0063:200B8000E901F308000F0F080400000C0800040D010C000F0C0000040400000B01040C2FA6:1E0C0000002F2F6900000108010101030C1E0001F7001E010101010C000100F80C1E8D:100C780004B80004BC0004C00104C46404C86400CF:00000001FF"
//#define print_byte1 ":020000040002F8:200000000000004000000000000050000000004000FF80001000002000303020FF20003092:200080003020FF2020002000FFFFFFFF0CC0000010001000FF4050C0400001001020000009:20010000001000C00048480001FF800000FFC040E0FF47C000FFC000FFFF0C0C40C0C00085:20018000000000C0C0C0C000C00010C000C0C0C0C00000C000FF000200020002FF617369CE:20020000617278496865206E6F6561736C656E6564616969686C6E6E2C73617365206C00F8:2002800000FF400000000000000020505020FF002080300020C0F1303080001010800050CF:2003000050802030F23030803030800030303030803030208000FF000000FF200030303815:200380003020FF008020303020203030802000303034303430343020FF2080303020FF8084:20040000C000100000FFFFC6C040FF06C600C6C0C0C0C0C005C0C5C0FF801520C000002019:200480000000C0C000C0FFC000C0FFC0FF1540C02000003000E00000000020C0000030206A:20050000004000FFC0C0804040C500C00000FFC4C0FFC0C060C450FF00304400C0FF00806F:200580000050FF00FFC000000000C0C0FF60C0C0C0C0FF00804050C480C00000FFC4C0FFD9:20060000C45030006000600000003000FFFF00441000032F0010001010C050C0005000C012:20068000CF6000C0CF500000000000FFC000C0C0C00000000000FFC000C0C00000FF00FF10:20070000C000C000C0C000C0FFC0FF80437050C3800000FF700000C000FF00830000FFC223:20078000C0FF6042C00FC090C0006000000000122210C0100000C0001F00C0C03000FF0017:2008000000000050C000C0C0C050C0C000FF0000FF50C0001020FE00FFC0FF00FFFFFF00C1:200880000000C0C0C050C0C0C000FFC0FF0083478040500000C10000C00000FF7000000000:20090000FEC1C0FFC0C090C16100100000A0C0207030C0C040C00030700040FF0000000098:20098000FF000000C0FF0087FEC000C05000C0C0FE00C0C0C00000C0C0FEC0FF0087400181:200A000000FEC00080101120801020FF800C200C0C0C0C1F400000100000C0000000FE108F:200A80002000000000806473610040000FFE10200F0000000000008040000F100000000013:200B0000000080401000C0C0C0C00000FF00C0000030102000000030102000000000FF0087:200B8000FF00FF00008040201000C0C030102000000000804000C0C0102030000000806403:1E0C000000647361000010000030C00000FF0020FF00FF0010C020C0000000FF00FFD3:100C7800000C20000C20000C00000C01000C0100EE:00000001FF"
//#define print_byte2 ":020000040002F8:200000000000002D9F70009F70009F750000009554FFBD009011005200908152FF9200D025:20008000C152FF1062809052FF2FFFFF029F7CA0A09C8C00FF2DA0D5A00080858091520020:20010000919100D584A0A05CA0FFBD14002FA0A08F2FC09F8C2F9F8C2F2F02022D8F8D9D9E:2001800000008DA08DA08D009D9D9DD09DC19D8C8D9D009D50FF8F009D009D00FF73746E17:200200006E2074636F206B20746D727474722E6E757373656565206E20736C2E6C576400AA:20028000522F2D1100100052002D42B1A052FFBD92BD1200D24F8C9180BD00B1A0BD00B1D4:20030000A0BD524F83D1C0BDD1C0BDA0D1C0D1C0BDD1C052BD11FF100010FF520091C0A02F:200380004052FF72BD92D1C04292D1C0BD520091C0A040A040A04052FF92BDD1C052FFBDD6:2004000040E0FC8051FF2F9F9C2D2F9F9F8C9F9C4C80A0809F809F9C2FBD9FA0910050A033:200480000052909000822F925CA0FF812F9F2D91B08100A000905E00538180A0A000A09319:20050000529283FFA080BD2DB09F009C5C00FF9F9C2F84CC4C9F9CFF55959F00942FA0BD3C:200580005695FFA0FF435C0085804C80FF85958C85942F85BD2DB09FBD9C5C00FF9F9C2F99:200600009F45A055A000A096C0838055FFFF559F93009FB090C10083838C814C5CA05696A7:20068000B0A05595B0A056005500A0FF9395808C83A0005500A0FF9693808C00A0FFA0FFC8:2007000096938095808CA086FF942FBD2DB0479FA000A0FFA000589C00FFA0BD5C00FF9FFE:200780009C2F959F88B0CC4C940046560056009F9F9185828C519C00B000864C9C00FF53C5:20080000898085A094008985898C4385A0FF00A0FFB09400A0A0FFA0FF942FA0FF2FFF46F5:2008800050008985898C408C8585FF942FA0BD2DA0B04800589F00189C00A0FFA0005C00E5:20090000FF9F9C2F84CC4C9F9F9CE0500080859001474A824C800088885344FF5490005079:20098000FF005000962FA0BDFF895A8347004580FF5495848500874480FF962FA0BD2D04E7:200A0000A0FFB0A0BD84B0A0BD518CFFBD020002020202002D8D8FA0008D9D7C009DFF9D2E:200A8000A09D009D00BD65656C002D8D8FFF9DA08F005000A000A0BD2D8D8F9D005000A052:200B000000E0BD2D8D8DE08DE08D009DFF8D9D7C009D8D9DA000009D8D9DA000009DFF501B:200B8000FF50FF9D8DBD2D8D8D8DA08D9D9D9DA0009D8DBD2D8DA08D8D9DA0A0009DBD65B1:1E0C00000065656C0052410040F0F15C432F5C52FFA02F4041F1F04252005CFFA02F82:100C7800000200000200000200000202000202005E:00000001FF"
//#define print_byte3 ":020000040002F8:2000000010EBEBE9E5E31BE5E31BE5E30AEAEBE4E31AE8EAE4E31AE24AE4E4E25AE20AE410:20008000E4E21AE21210E4E31AE1FFFF00E5E303011512EAFFE9E1E1E3EAE0E0E2E5E30AF4:20010000E5E5EBE1E2E1E1E1E1CAE8E31AE1E1E1E2E146E5E5E1E5E5E1E10000E9E2E5E5BC:20018000EBEBE5E3E5E3E5EAE5E5E5E7E5E7E5E2E5E5EBE5E18AE2EBE5EBE5EBEA20202045:2002000067542E68666561747A2067652064206E2020207272736B7370746C006C6F0A00AB:20028000E301E9E31AE31AE33AE9E2E8E8E22AE8E208E20AE3E2E0E4E408EAE8E808EAE80C:20030000E808E21210E4E4E8E0E0E8E1E0E0E4E4E8E4E4E208E31AE31AE30AE23AE4E0E1E6:20038000E1E22AE308E2202022E22424E8E23AE4E4E1E5E1E5E1E5E22AE208E4E4E21AE857:20040000E2E3E5E2E31AE1E5E5E9E1E5E5E5E5E5E2E5E3E5E5E5E5E5E1E8E5E3E5EAE111F0:200480001AE305150AE5E1E5E3031AE5E1E5E9E5E1050AE3EAE5E18AE305151111EAE1E53B:20050000E315051AE3E5E8E9E1150AE5E30AEBE5E5E1E2E3E2E5E5EAE315E51AE5E1E3E8E0:20058000E1858AE1EBE0E33AE0E2E2E5EBE5E5E3E5E5E1E2E8E9E11508E5E30AEBE5E5E1BD:20060000E5E2E1E1939AE1E5E3E0E2E18AEAE1E5051AE5E1E5130AE5E0E0E2E2E133E31542:200680001113E3151113E31AE30AE1EBE5E5E0E2E5E1EAE31AE1EBE5E5E0E2EAE1EBE1EB51:20070000E5E5E0E5E0E2E1E5EBE5E1E8E9E1E215E11AE1EBE1EAE3E51AEBE3E8E30AEBE581:20078000E5E1E5E5E2E1E3E2E50AE2E10AE18AE5E5E5E0E0E2E1859AE11AE0E0E24AEBE314:2008000030333531E53AE3E5E0E2E2E5E1EBEAE1EBE1E50AE1E1EBE1EBE5E1E1EAE1EAE098:20088000E33AE3E5E0E2E2E3E5E2EBE5E1E1E8E9E1E1E20AE3859AE1E50AE1EBE1EAE30ABE:20090000EBE5E5E1E2E3E2E5E5E5E1E30AE2E0E5E0E2E0E0E0E2EAE0E0E1303AE3455AE3D8:200980001AEAE31AE5E1E3E8EBE3E1E5E20AE0E5EBE33530353AE0E2E5EBE5E1E1E8E9E0F4:200A0000E1EBE10308E2E1E308E2E41AE800100000000010E9E5E2E3EBE5E5E30AE5EBE59E:200A8000E1E5EBE5EBE8767230A0E9E5E2EBE5E1E2EBE31AE3EAE3E8E9E5E2E5EBE31AE312:200B0000EAE3E8E9E5E5E3E5E3E5EAE5EBE5E5E30AE5E2E5E3EFEAE5E2E5E3EFEAE5EBE3E9:200B80000AE20AE5E5E8E9E5E5E5E3E5E5E5E5E3EFE5E5E8E9E5E3E5E2E5E3E3EFE5E876C5:1E0C0000A0767230A0E3E20AE2E5E5E11011E3121AE3E1E2E2E5E5E0E30AE30AE1E124:100C7800000000000010000000000000000000005C:00000001FF"

// LED1 TOGGLE
//#define led_1_byte0 ":020000040002F8:20000000000029F090012D8C01087C0104003B0400FBF0110403070403040404FB04030194:200080000101FB0304020400EA1EFFFFFF1401000000041EFF3000B2000C0400040800031A:20010000040020B20100240484EF30010014040E011C200800000000002069000100D50072:200180000100F4A0001E01032B032F10081010181810FB1010010C0D0C1003040401060868:20020000080102080801010402010101B2B20100B2B20101010101010103F9011302CB0407:200280000704B423B204F9040102B2B202010101010409040423032302230104F5040101D9:200300000101FB01780C0038A1C00002000120022002A020201CA0172012A00D2008A0031E:200380008203820203028203820203028203820203028203820203020222E4038E00000C80:200400001E000C1E0400034B0713050000F801F842041E0C0000EC02690404010504E80170:2004800084049E0C0C0000DB02580404010504A80173048D0C0E0000CA02470404011308D9:200500000401705408000004044001590304280154046E0E2F2F302F2F31E4E808006D788E:200580000000697B000100000108080061007E00010D0E005D7700010B0700597000010CAD:200600000000080F04000008000C1100DC0C0C011104080C0A010B04080014010500BC0084:20068000E901F308000F0F080400080C0800040D010C000F0F080400080C0800040C010CAE:20070000000F0C0000040400000B01040C2F002F2F69002F2F302F2F310100010100FB1E6B:19078000000108010101030C1E0001F7001E010101010C000100F80C1EDE:0207E400010012:00000001FF"
//#define led_1_byte1 ":020000040002F8:200000000000004000000000000050000000004000FF80001000002000303020FF20003092:200080003020FF2020002000FFFFFFFFFFC0000010001000FF4050C0400001001020000016:20010000001000C00048480001FF800000FFC040E0FF4740C0C0C0C000100000000000C0CA:20018000C0C0FF8600FF400000000000000020505020FF002080300020C0F13030800010AB:200200001080005050802030F23030803030800030303030803030208000FF000000FF20CE:20028000003030383020FF008020303020203030802000303034303430343020FF208030BC:200300003020FF8047400000E0E00031102008280424000001000100020002000300030002:200380000330030330030230020230020130010130010030000030000024FF10E010004062:20040000FF0040FFD000000F000E00C000FFC0FF0FD0FF400000FF100000C0000000102016:2004800000000080400000FF100000C0000000102000000080400000FF100000C0000010FE:20050000002000C000C00000001020000000102000000080646C00646C00070740000F005E:2005800010200F0000000000008040000F100000000000100F0000000000100F00000000FF:20060000000080401000C0C0C0C00000FF00C0000030102000000030102000000000FF008C:20068000FF00FF00008040201000C0C0301020000000008040201000C0C0301020000000BC:2007000000804000C0C010203000000080640064736100646C00646C00C000100000FFFFAF:190780000010000030C00000FF0020FF00FF0010C020C0000000FF00FF95:0207E400000013:00000001FF"
//#define led_1_byte2 ":020000040002F8:200000000000002D9F70009F70009F750000009554FFBD009011005200908152FF9200D025:20008000C152FF1062809052FF2FFFFFFF9F7CA0A09C8C00FF2DA0D5A00080858091520023:20010000919100D584A0A05CA0FFBD14002FA0A08F2FC02DA08DA08D9D9F005000A0009D1B:200180008C8DFF01522F2D1100100052002D42B1A052FFBD92BD1200D24F8C9180BD00B1CA:20020000A0BD00B1A0BD524F83D1C0BDD1C0BDA0D1C0D1C0BDD1C052BD11FF100010FF5213:200280000091C0A04052FF72BD92D1C04292D1C0BD520091C0A040A040A04052FF92BDD1B4:20030000C052FFBDC02D5100A03E601161B052A052A052005200520052005200520052004F:2003800050A34050A34050A34050A34050A34050A34050A34050A34051A0FFA0B06360BD05:200400002FA0BD2F4DCD008F008F00DD5CFF5CFF8F8D2F2DCDDDFFA0008D9D7C009D9FA013:20048000009D00BD2DCDDDFFA0008D9D7C009D9FA0009D00BD2DCDDDFFA0008D9D7C008D07:200500009DA0009FDDDC5C009D9FA000009D9FA0009D00BD65650065650002022D8D8F00F7:200580009DA08F005000A000A0BD2D8D8F9D005000A0009D8F005000A0009D8F005000A034:2006000000E0BD2D8D8DE08DE08D009DFF8D9D7C009D8D9DA000009D8D9DA000009DFF5020:20068000FF50FF9D8DBD2D8D8D8D9D8D9D9D9DA0009D8DBD2D8D8D8D9D8D9D9D9DA0009DB7:200700008DBD2D8DA08D8D9DA0A0009DBD650065656C0065650065650040E0FC8051FF2F9A:1907800052410040F0F15C432F5C52FFA02F4041F1F04252005CFFA02F42:0207E400000013:00000001FF"
//#define led_1_byte3 ":020000040002F8:2000000010EBEBE9E5E31BE5E31BE5E30AEAEBE4E31AE8EAE4E31AE24AE4E4E25AE20AE410:20008000E4E21AE21210E4E31AE1FFFFFFE5E303011512EAFFE9E1E1E3EAE0E0E2E5E30AF5:20010000E5E5EBE1E2E1E1E1E1CAE8E31AE1E1E1E2E146E9E3E5E3E5E5E5EBE31AE3EBE5AA:20018000E2E5EA00E301E9E31AE31AE33AE9E2E8E8E22AE8E208E20AE3E2E0E4E408EAE81E:20020000E808EAE8E808E21210E4E4E8E0E0E8E1E0E0E4E4E8E4E4E208E31AE31AE30AE204:200280003AE4E0E1E1E22AE308E2202022E22424E8E23AE4E4E1E5E1E5E1E5E22AE208E441:20030000E4E21AE846E9E30AE1E042E212E1E191E191E18AE18AE18AE18AE18AE18AE18A50:20038000E1E020E1E020E1E020E1E020E1E020E1E020E1E020E1E020E1313AE1E14222E8FB:20040000E1E3E8E1E2E5EAE2EAE2EAE5E30AE20AE2E2E1E9E5E5EBE3EBE5E5E30AE5E5E3D3:20048000EBE5EBE8E9E5E5EBE3EBE5E5E30AE5E5E3EBE5EBE8E9E5E5EBE3EBE5E5E30AE241:20050000E5E3EBE5E5E5E11AE5E5E3EBEAE5E5E3EBE5EBE87664007664000000E9E5E2EB5D:20058000E5E1E2EBE31AE3EAE3E8E9E5E2E5EBE31AE3EAE5E2EBE31AE3EAE5E2EBE31AE3DB:20060000EAE3E8E9E5E5E3E5E3E5EAE5EBE5E5E30AE5E2E5E3EFEAE5E2E5E3EFEAE5EBE3EE:200680000AE20AE5E5E8E9E5E5E5E5E5E5E5E5E3EFE5E5E8E9E5E5E5E5E5E5E5E5E3EFE555:20070000E5E8E9E5E3E5E2E5E3E3EFE5E876A0767230A0766400766400E2E3E5E2E31AE141:19078000E3E20AE2E5E5E11011E3121AE3E1E2E2E5E5E0E30AE30AE1E106:0207E400A00073:00000001FF"

// LED2 TOGGLE
//#define led_2_byte0 ":020000040002F8:20000000000029F090012D8C01087C0104003B0400FBF0110403070403040404FB04030194:200080000101FB0304020400EA1EFFFFFF1401000000041EFF3000B2000C0400040800031A:20010000040020B20100240484EF30010014040E011C200800000000002069000101D50071:200180000100F4A0001E01032B032F10081010181810FB1010010C0D0C1003040401060868:20020000080102080801010402010101B2B20100B2B20101010101010103F9011302CB0407:200280000704B423B204F9040102B2B202010101010409040423032302230104F5040101D9:200300000101FB01780C0038A1C00002000120022002A020201CA0172012A00D2008A0031E:200380008203820203028203820203028203820203028203820203020222E4038E00000C80:200400001E000C1E0400034B0713050000F801F842041E0C0000EC02690404010504E80170:2004800084049E0C0C0000DB02580404010504A80173048D0C0E0000CA02470404011308D9:200500000401705408000004044001590304280154046E0E2F2F302F2F31E4E808006D788E:200580000000697B000100000108080061007E00010D0E005D7700010B0700597000010CAD:200600000000080F04000008000C1100DC0C0C011104080C0A010B04080014010500BC0084:20068000E901F308000F0F080400080C0800040D010C000F0F080400080C0800040C010CAE:20070000000F0C0000040400000B01040C2F002F2F69002F2F302F2F310100010100FB1E6B:19078000000108010101030C1E0001F7001E010101010C000100F80C1EDE:0207E400010012:00000001FF"
//#define led_2_byte1 ":020000040002F8:200000000000004000000000000050000000004000FF80001000002000303020FF20003092:200080003020FF2020002000FFFFFFFFFFC0000010001000FF4050C0400001001020000016:20010000001000C00048480001FF800000FFC040E0FF4740C0C0C0C000100000000000C0CA:20018000C0C0FF8600FF400000000000000020505020FF002080300020C0F13030800010AB:200200001080005050802030F23030803030800030303030803030208000FF000000FF20CE:20028000003030383020FF008020303020203030802000303034303430343020FF208030BC:200300003020FF8047400000E0E00031102008280424000001000100020002000300030002:200380000330030330030230020230020130010130010030000030000024FF10E010004062:20040000FF0040FFD000000F000E00C000FFC0FF0FD0FF400000FF100000C0000000102016:2004800000000080400000FF100000C0000000102000000080400000FF100000C0000010FE:20050000002000C000C00000001020000000102000000080646C00646C00070740000F005E:2005800010200F0000000000008040000F100000000000100F0000000000100F00000000FF:20060000000080401000C0C0C0C00000FF00C0000030102000000030102000000000FF008C:20068000FF00FF00008040201000C0C0301020000000008040201000C0C0301020000000BC:2007000000804000C0C010203000000080640064736100646C00646C00C000100000FFFFAF:190780000010000030C00000FF0020FF00FF0010C020C0000000FF00FF95:0207E400000013:00000001FF"
//#define led_2_byte2 ":020000040002F8:200000000000002D9F70009F70009F750000009554FFBD009011005200908152FF9200D025:20008000C152FF1062809052FF2FFFFFFF9F7CA0A09C8C00FF2DA0D5A00080858091520023:20010000919100D584A0A05CA0FFBD14002FA0A08F2FC02DA08DA08D9D9F005000A0009D1B:200180008C8DFF01522F2D1100100052002D42B1A052FFBD92BD1200D24F8C9180BD00B1CA:20020000A0BD00B1A0BD524F83D1C0BDD1C0BDA0D1C0D1C0BDD1C052BD11FF100010FF5213:200280000091C0A04052FF72BD92D1C04292D1C0BD520091C0A040A040A04052FF92BDD1B4:20030000C052FFBDC02D5100A03E601161B052A052A052005200520052005200520052004F:2003800050A34050A34050A34050A34050A34050A34050A34050A34051A0FFA0B06360BD05:200400002FA0BD2F4DCD008F008F00DD5CFF5CFF8F8D2F2DCDDDFFA0008D9D7C009D9FA013:20048000009D00BD2DCDDDFFA0008D9D7C009D9FA0009D00BD2DCDDDFFA0008D9D7C008D07:200500009DA0009FDDDC5C009D9FA000009D9FA0009D00BD65650065650002022D8D8F00F7:200580009DA08F005000A000A0BD2D8D8F9D005000A0009D8F005000A0009D8F005000A034:2006000000E0BD2D8D8DE08DE08D009DFF8D9D7C009D8D9DA000009D8D9DA000009DFF5020:20068000FF50FF9D8DBD2D8D8D8D9D8D9D9D9DA0009D8DBD2D8D8D8D9D8D9D9D9DA0009DB7:200700008DBD2D8DA08D8D9DA0A0009DBD650065656C0065650065650040E0FC8051FF2F9A:1907800052410040F0F15C432F5C52FFA02F4041F1F04252005CFFA02F42:0207E400000013:00000001FF"
//#define led_2_byte3 ":020000040002F8:2000000010EBEBE9E5E31BE5E31BE5E30AEAEBE4E31AE8EAE4E31AE24AE4E4E25AE20AE410:20008000E4E21AE21210E4E31AE1FFFFFFE5E303011512EAFFE9E1E1E3EAE0E0E2E5E30AF5:20010000E5E5EBE1E2E1E1E1E1CAE8E31AE1E1E1E2E146E9E3E5E3E5E5E5EBE31AE3EBE5AA:20018000E2E5EA00E301E9E31AE31AE33AE9E2E8E8E22AE8E208E20AE3E2E0E4E408EAE81E:20020000E808EAE8E808E21210E4E4E8E0E0E8E1E0E0E4E4E8E4E4E208E31AE31AE30AE204:200280003AE4E0E1E1E22AE308E2202022E22424E8E23AE4E4E1E5E1E5E1E5E22AE208E441:20030000E4E21AE846E9E30AE1E042E212E1E191E191E18AE18AE18AE18AE18AE18AE18A50:20038000E1E020E1E020E1E020E1E020E1E020E1E020E1E020E1E020E1313AE1E14222E8FB:20040000E1E3E8E1E2E5EAE2EAE2EAE5E30AE20AE2E2E1E9E5E5EBE3EBE5E5E30AE5E5E3D3:20048000EBE5EBE8E9E5E5EBE3EBE5E5E30AE5E5E3EBE5EBE8E9E5E5EBE3EBE5E5E30AE241:20050000E5E3EBE5E5E5E11AE5E5E3EBEAE5E5E3EBE5EBE87664007664000000E9E5E2EB5D:20058000E5E1E2EBE31AE3EAE3E8E9E5E2E5EBE31AE3EAE5E2EBE31AE3EAE5E2EBE31AE3DB:20060000EAE3E8E9E5E5E3E5E3E5EAE5EBE5E5E30AE5E2E5E3EFEAE5E2E5E3EFEAE5EBE3EE:200680000AE20AE5E5E8E9E5E5E5E5E5E5E5E5E3EFE5E5E8E9E5E5E5E5E5E5E5E5E3EFE555:20070000E5E8E9E5E3E5E2E5E3E3EFE5E876A0767230A0766400766400E2E3E5E2E31AE141:19078000E3E20AE2E5E5E11011E3121AE3E1E2E2E5E5E0E30AE30AE1E106:0207E400A00073:00000001FF"

// EXEC TEST (executes /bin/ottos_led_blinker2)
#define exec_byte0 ":020000040002F8:20000000000029F090012D8C01087C0104003B0400FBF0110403070403040404FB04030194:200080000101FB0304020400EA1EFFFFFF1401000000041EFF3000B2000C0400040800031A:2001000004001EB20100240484EF30010014040E011C20081800000101D800082F2F6F65A7:200180006C65001E01032B032F10081010181810FB1010010C0D0C10030404010608080123:2002000002080801010402010101B2B20100B2B20101010101010103F9011302CB04070405:20028000B423B204F9040102B2B202010101010409040423032302230104F50401010101E2:20030000FB0108001E8300001D8600010000010808001B008900010D0E001A8200010B0714:2003800000197B00010C0000080F04000008000C1100DC0C0C011104080C0A010B0408003C:2004000014010500BC00E901F308000F0F080400080C0800040D010C000F0F080400080C7F:200480000800040C010C000F0C0000040400000B01040C0E0804000800040301000E2F0091:200500002F2F69002F2F302F2F310100010100FB1E000108010101030C1E0001F7001E018B:0A0580000101010C000100F80C1E3F:00000001FF"
#define exec_byte1 ":020000040002F8:200000000000004000000000000050000000004000FF80001000002000303020FF20003092:200080003020FF2020002000FFFFFFFFFFC0000010001000FF4050C0400001001020000016:20010000001000C00048480001FF800000FFC040E0FF4740C0C0200010000080626F7364C2:20018000697200FF400000000000000020505020FF002080300020C0F13030800010108045:20020000005050802030F23030803030800030303030803030208000FF000000FF2000302E:2002800030383020FF008020303020203030802000303034303430343020FF20803030209C:20030000FF8040000E0010200E0000000000008040000E100000000000100E0000000000D6:20038000100E00000000000080401000C0C0C0C00000FF00C00000301020000000301020F0:2004000000000000FF00FF00FF00008040201000C0C0301020000000008040201000C0C09F:2004800030102000000000804000C0C0102030000000804020100030102000000080640028:2005000064736100646C00646C00C000100000FFFF0010000030C00000FF0020FF00FF0018:0A05800010C020C0000000FF00FFC3:00000001FF"
#define exec_byte2 ":020000040002F8:200000000000002D9F70009F70009F750000009554FFBD009011005200908152FF9200D025:20008000C152FF1062809052FF2FFFFFFF9F7CA0A09C8C00FF2DA0D5A00080858091520023:20010000919100D584A0A05CA0FFBD14002FA0A08F2FC02D8F8D9DA0A000A0BD69745F5F4D:200180006E32522F2D1100100052002D42B1A052FFBD92BD1200D24F8C9180BD00B1A0BDE6:2002000000B1A0BD524F83D1C0BDD1C0BDA0D1C0D1C0BDD1C052BD11FF100010FF520091DF:20028000C0A04052FF72BD92D1C04292D1C0BD520091C0A040A040A04052FF92BDD1C05233:20030000FFBD2D8D8F009DA08F005000A000A0BD2D8D8F9D005000A0009D8F005000A000CD:200380009D8F005000A000E0BD2D8D8DE08DE08D009DFF8D9D7C009D8D9DA000009D8D9D13:20040000A000009DFF50FF50FF9D8DBD2D8D8D8D9D8D9D9D9DA0009D8DBD2D8D8D8D9D8DC1:200480009D9D9DA0009D8DBD2D8DA08D8D9DA0A0009DBD2D8DCD8D9D9DDDA000E0BD650086:2005000065656C0065650065650040E0FC8051FF2F52410040F0F15C432F5C52FFA02F40B8:0A05800041F1F04252005CFFA02F91:00000001FF"
#define exec_byte3 ":020000040002F8:2000000010EBEBE9E5E31BE5E31BE5E30AEAEBE4E31AE8EAE4E31AE24AE4E4E25AE20AE410:20008000E4E21AE21210E4E31AE1FFFFFFE5E303011512EAFFE9E1E1E3EAE0E0E2E5E30AF5:20010000E5E5EBE1E2E1E1E1E1CAE8E31AE1E1E1E2E146E9E2E5E5E3E3EBE3E86E746C62C7:200180006B00E301E9E31AE31AE33AE9E2E8E8E22AE8E208E20AE3E2E0E4E408EAE8E80874:20020000EAE8E808E21210E4E4E8E0E0E8E1E0E0E4E4E8E4E4E208E31AE31AE30AE23AE4D6:20028000E0E1E1E22AE308E2202022E22424E8E23AE4E4E1E5E1E5E1E5E22AE208E4E4E299:200300001AE8E9E5E2EBE5E1E2EBE31AE3EAE3E8E9E5E2E5EBE31AE3EAE5E2EBE31AE3EA52:20038000E5E2EBE31AE3EAE3E8E9E5E5E3E5E3E5EAE5EBE5E5E30AE5E2E5E3EFEAE5E2E54E:20040000E3EFEAE5EBE30AE20AE5E5E8E9E5E5E5E5E5E5E5E5E3EFE5E5E8E9E5E5E5E5E5CE:20048000E5E5E5E3EFE5E5E8E9E5E3E5E2E5E3E3EFE5E8E9E5E5E5E5E5E5E3EFE3E876A050:20050000767230A0766400766400E2E3E5E2E31AE1E3E20AE2E5E5E11011E3121AE3E1E2D3:0A058000E2E5E5E0E30AE30AE1E149:00000001FF"

// ICP SERVER APP
#define ipcserver_byte0 ":020000040002F8:20000000000029F090012D8C01087C0104003B0400FBF0110403070403040404FB04030194:200080000101FB0304020400EA1EFFFF681401000000043FFF3000B2000C04000408000390:200100000400C7B20100240484EF30010014040E011C2014001E0C001E1E100C0C0400008C:200180000800080804000A0008000C080108040800F40C1E002404006D54077A01026E4EC1:2002000001734B08000A9014000A8C10F220200000201004200108202008049CE2200C1727:200280002D4920660134200C00140AF31420140AAA200C04140AE81415140A9F200C081490:200300000ADD140A140A94200C0C140AD214FF2000080ACB0011A8F608F401A0F1ACEF20F6:200380000CCB20C900209B736572690D74006E73656E75736C006E73656E67720D5B56203B:2004000044002053455B454E525D0A001E01032B032F10081010181810FB1010010C0D0C01:2004800010030404010608080102080801010402010101B2B20100B2B2010101010101013C:2005000003F9011302CB040704B423B204F9040102B2B20201010101040904042303230298:20058000230104F50401010101FB010E0000000300000001002800040052000C0108040889:20060000001B040800000000080400000000040800000000040104080108080400E3000E84:200680000014080400000C000010020000000008230C000C010C04010800190000EF1000A7:20070000050C010C042D00040C000C049D14000C007C02660404010700F20000047F0499A7:200780000C0E0400300153080801050800047C08880E2F2F6900D80C000004000491040C27:200800000E040000080004088F080E0E04000008009000040894080E01030700010103FBA2:2008800000011EFF01041201080D0110081001010F0F1210FC100802040402B20100011EB0:200900001000003C040400000004000004EC00E8003C00CC0000090C0C0500040405041E4A:20098000040000F2001E8010000C0010000A0004050000040003060204000004F000041069:200A000070001812000000B7F0003C070304E000FF0000D803003C00700304F405B4060823:200A80000506040400BF00000100003C0470700060700000008938003C30040C0300070349:200B00000001000403F8FF03040036F0810001310001000404050000008C0000008C0000D0:200B80000A0006056D00000C040003140006066200000C0409065B055900000C000C080640:200C00000063003C70F00004000103017200560000029A00F0000027B0003C00B407860321:200C800004003201093E092F7C84000601040004168C140C0904101A08030100070013016F:200D00000005040400051E1B08350000080706BA075B003C05B63CBA090809010005040405:200D800001000449003C07F0F000010131046802050003010A003D0000C528003C070304BA:200E0000182000050016040A000C04070C09080103070C08FA00040200EB010003003C00F3:200E8000F0B001070004020A00BB08000C0003090400B2003C07F0109004C400001003213A:200F000000100104FC100C0004000810FC0100010100FB1E780C0038A1C00002000120022E:200F80002002A020201CA0172012A00D2008A00382038202030282038202030282038202AD:2010000003028203820203020222E4038E00000C1E000C1E08009DB4000099A40001000039:20108000010808009100A700010D0E008DA000010B0700899900010C0000080F0400000859:20110000000C1100DC0C0C011104080C0A010B04080014010500BC00E901F308000F0F0891:201180000400080C0800040D010C000F0F080400080C0800040C010C000F0C00000404008B:20120000000B01040C0E0804000800040301000E0C04000004001E010C0E08040008000415:201280001F010E08000000002001080E08040008000421010E2F002F2F69002F2F302F2FB7:1A13000031000108010101030C1E0001F7001E010101010C000100F80C1E20:1C13680025D830343863676B6F737700040000040400040801040C64041064003D:00000001FF"
#define ipcserver_byte1 ":020000040002F8:200000000000004000000000000050000000004000FF80001000002000303020FF20003092:200080003020FF2020002000FFFFFFFF13C0000010001000FF4050C0400001001020000002:20010000001000C00048480001FF800000FFC040E0FF47C000FFC000FFFF1414D01000C095:20018000C0C0C000C00000C0001010C0C0C0C00000FFD0FF40D010000F010D0100000F0163:20020000000F010010200100102001000100C00000C00000C0000000C000C00001C0000EDC:20028000010F10010000C0C00010200000010010FFC0C00010200000010010FFC0C000102D:20030000200000010010FFC0C0001020000000C000102000C0C0000000000000000000C0CD:2003800000010001C0C0FF6572796E0065006170206463736C0061702064206F0053455B4B:2004000045005B535D52494752000D00FF400000000000000020505020FF0020803000203D:20048000C0F130308000101080005050802030F230308030308000303030308030302080C9:2005000000FF000000FF20003030383020FF0080203030202030308020003030343034306E:20058000343020FF2080303020FF804000C00000C0C000000000C0C00002C0C0C0C0C00077:200600000000C01000100000C01000100000C01000100000C0C0C0C0C0C000C000FF00807B:2006800040D0201000C0C0C000C000C0C0C0001002C100C0101010001000020010FFC00036:2007000000C00000001010C000101000FFD080400000100200C00000000110200002000283:200780008040100000100200C000000010200200028064736100134000C0C0001002008066:20080000401000C0C0001020020080401000C0C0000200102002008040000000102000FF63:200880000040FF10140000180000E000000040C030205030FF00004000100010001040FF7F:20090000C6C040FF06C600C6C0C0C0C0C005C0C5C0FF801520C00000200000C0C000C0FFA3:20098000C000C0FFC0FF1540C02000003000E00000000020C000003020004000FFC0C08065:200A00004040C500C00000FFC4C0FFC0C060C450FF00304400C0FF00800050FF00FFC0009B:200A8000000000C0C0FF60C0C0C0C0FF00804050C480C00000FFC4C0FFC4503000600060DE:200B00000000003000FFFF00441000032F0010001010C050C0005000C0CF6000C0CF500003:200B800000000000FFC000C0C0C00000000000FFC000C0C00000FF00FFC000C000C0C00019:200C0000C0FFC0FF80437050C3800000FF700000C000FF00830000FFC2C0FF6042C00FC02E:200C800090C0006000000000122210C0100000C0001F00C0C03000FF0000000050C000C032:200D0000C0C050C0C000FF0000FF50C0001020FD00FFC0FF00FFFFFF000000C0C0C050C03D:200D8000C0C000FFC0FF0083478040500000C10000C00000FF70000000FEC1C0FFC0C090BD:200E0000C16100100000A0C0207030C0C040C00030700040FF00000000FF000000C0FF0063:200E800087FEC000C05000C0C0FE00C0C0C00000C0C0FEC0FF0087400100FEC000801011DB:200F000020801020FF801420141414141FC000100000FFFF47400000E0E000311020082839:200F8000042400000100010002000200030003000330030330030230020230020130010116:2010000030010030000030000024FF10E0100040FF0040FF40000FFF10200F000000000011:20108000008040000F100000000000100F0000000000100F00000000000080401000C0C0E3:20110000C0C00000FF00C0000030102000000030102000000000FF00FF00FF0000804020F3:201180001000C0C0301020000000008040201000C0C030102000000000804000C0C010201F:201200003000000080402010003010200000008040100010203000008040201000301020CE:20128000000080400020103000008040201000301020000080640064736100646C00646C22:1A130000000010000030C00000FF0020FF00FF0010C020C0000000FF00FF08:1C136800001331353964686C70747800001420001420001400001401001401007D:00000001FF"
#define ipcserver_byte2 ":020000040002F8:200000000000002D9F70009F70009F750000009554FFBD009011005200908152FF9200D025:20008000C152FF1062809052FF2FFFFF029F7CA0A09C8C00FF2DA0D5A00080858091520020:20010000919100D584A0A05CA0FFBD14002FA0A08F2FC09F8C2F9F8C2F2F02024D8D8DA07D:200180008DA08D9D9D5C009D9DA0C09D8C8D9D9D5CFF8D2F2D4D8D8D8F008F0050008F00DD:20020000008F008DA0A0008DA0A000A0008D9DA08C9DA08C9DA08C9D9D909C00009D8C8F0F:20028000008F9D0050009D9C9C8DA0008D008DA0FF9D9C9C8DA0008D008DA0FF9D9C9C8D0A:20030000A0008D008DA0FF9D9C9C8DA0008D009D9C8DA000A0CD8F008D00008F008F009D4B:200380009C009D00A08DFF722020640073006D61622063660A006D61626965720045524302:200400005D004D41204556204F0000522F2D1100100052002D42B1A052FFBD92BD1200D2A5:200480004F8C9180BD00B1A0BD00B1A0BD524F83D1C0BDD1C0BDA0D1C0D1C0BDD1C052BDB8:2005000011FF100010FF520091C0A04052FF72BD92D1C04292D1C0BD520091C0A040A04001:20058000A04052FF92BDD1C052FFBD2D8D9D5C009DDC5C009D009D8D9D009D804C8D9D9D20:200600005C009D9DDCD121CC9D9DDCD121CC9D9DDCD121CC9D8C8D9D4C8D9D9D5CFF9DBDE7:200680002D4D8D8D8DA08D9D5C8D009D6C8D9D9D009FDC9D8C8D9DCC9D9D00518DFF9D5C0C:20070000009D8C8D9DA0CC9D9DA0C09DFF8DBD2D8D8FA0008D9D7C009D009DA09D009D00F7:20078000BD2D8D8D8FA0008D9D7C009D9D9D009D00BD65656C00022D8DA08D9D8D009DBDAC:200800002D8D8DA08D9D9D8D009DBD2D8D8DA08D9D009D9D8D009DBD2D100052C05210FF61:2008800052BD2F01815200815200A052002DA0A04202A053FFBD12A0128012C012C0BD2F4D:200900009F9C2D2F9F9F8C9F9C4C80A0809F809F9C2FBD9FA0910050A00052909000822F26:20098000925CA0FF812F9F2D91B08100A000905E00538180A0A000A093529283FFA080BDF4:200A00002DB09F009C5C00FF9F9C2F84CC4C9F9CFF55959F00942FA0BD5695FFA0FF435C52:200A80000085804C80FF85958C85942F85BD2DB09FBD9C5C00FF9F9C2F9F45A055A000A0A3:200B000096C0838055FFFF559F93009FB090C10083838C814C5CA05696B0A05595B0A056DB:200B8000005500A0FF9395808C83A0005500A0FF9693808C00A0FFA0FF96938095808CA0B9:200C000086FF942FBD2DB0479FA000A0FFA000589C00FFA0BD5C00FF9F9C2F959F88B0CCE0:200C80004C940046560056009F9F9185828C519C00B000864C9C00FF53898085A094008978:200D000085898C4385A0FF00A0FFB09400A0A0FFA0FF942FA0FF2FFF4650008985898C4088:200D80008C8585FF942FA0BD2DA0B04800589F00189C00A0FFA0005C00FF9F9C2F84CC4C8E:200E00009F9F9CE0500080859001474A824C800088885344FF54900050FF005000962FA0C5:200E8000BDFF895A8347004580FF5495848500874480FF962FA0BD2D04A0FFB0A0BD84B0B6:200F0000A0BD518CFFBD0200020202020040E0FC8051FF2FC02D5100A03E601161B052A026:200F800052A0520052005200520052005200520050A34050A34050A34050A34050A34050D2:20100000A34050A34050A34051A0FFA0B06360BD2FA0BD2F2D8D8FFF9DA08F005000A00008:20108000A0BD2D8D8F9D005000A0009D8F005000A0009D8F005000A000E0BD2D8D8DE08D94:20110000E08D009DFF8D9D7C009D8D9DA000009D8D9DA000009DFF50FF50FF9D8DBD2D8D77:201180008D8D9D8D9D9D9DA0009D8DBD2D8D8D8D9D8D9D9D9DA0009D8DBD2D8DA08D8D9D40:20120000A0A0009DBD2D8DCD8D9D9DDDA000E0BD2D8D8D9D9DA0A000BD2D8D8D8D9D9D9DA3:20128000A000BD2D8DA09DA0A000BD2D8D8D8D9D9D9DA000BD650065656C006565006565C6:1A1300000052410040F0F15C432F5C52FFA02F4041F1F04252005CFFA02FB5:1C136800000232366165696D7175790000020000020000020000020200020200F6:00000001FF"
#define ipcserver_byte3 ":020000040002F8:2000000010EBEBE9E5E31BE5E31BE5E30AEAEBE4E31AE8EAE4E31AE24AE4E4E25AE20AE410:20008000E4E21AE21210E4E31AE1FFFF00E5E303011512EAFFE9E1E1E3EAE0E0E2E5E30AF4:20010000E5E5EBE1E2E1E1E1E1CAE8E31AE1E1E1E2E146E5E5E1E5E5E1E10000E2E5E5E3C2:20018000E5E3E5E5E5E1DAE5E5E3E7E5E2E5E5E5E1CAE2E1E9E2E5E5E2EBE2EBE31AE2EBBC:20020000EAE2EBE2E3E3EBE2E3E3EBE3EBE5E5E3E5E5E3E5E5E3E5E5E5E5E5E0EBE5E5E23C:20028000EBE2E5EBE31AE5E5E5E2E3EBE2EBE2E3EBE5E5E5E2E3EBE2EBE2E3EBE5E5E5E27B:20030000E3EBE2EBE2E3EBE5E5E5E2E3EBE2EBE5E5E2E3EBE3E5E2EBE2EBEAE2EBE2EBE521:20038000E5EBE5EBE3E5EA7674620A0074A06563697365750DA06563696E720A00525D4F5D:2004000020A0454700434945520000E301E9E31AE31AE33AE9E2E8E8E22AE8E208E20AE341:20048000E2E0E4E408EAE8E808EAE8E808E21210E4E4E8E0E0E8E1E0E0E4E4E8E4E4E208E7:20050000E31AE31AE30AE23AE4E0E1E1E22AE308E2202022E22424E8E23AE4E4E1E5E1E595:20058000E1E5E22AE208E4E4E21AE8E9E5E5E30AE5E5E31AE5EAE5E5E5EBE5E0E2E5E5E5CD:20060000E12AE5E5E5E5E0E5E5E5E5E5E0E5E5E5E5E5E0E5E5E2E5E5E2E5E5E5E13AE5E8BA:20068000E9E2E5E5E5E3E5E5E3E55AE5E2E5E5E5EBE5E7E5E2E5E5E7E5E5EBE3E5CAE5E35D:200700005AE5E2E5E5E3E7E5E5E3E7E5EBE2E8E9E5E2E3EBE5E5E30AE5EBE5E1E5EBE5EB8B:20078000E8E9E5E5E2E3EBE5E5E30AE5E5E5EBE5EBE8767230A000E9E5E3E5E5E2EBE5E838:20080000E9E5E5E3E5E5E5E2EBE5E8E9E5E5E3E5E5EBE5E5E2EBE5E8E9E30AE38482831AEE:20088000E30801E2E1E33AE1E33AE1E33AE9E1E1E2E2E8E28AE8E318E314E310E315E8E13F:20090000E5E5E9E1E5E5E5E5E5E2E5E3E5E5E5E5E5E1E8E5E3E5EAE1111AE305150AE5E16E:20098000E5E3031AE5E1E5E9E5E1050AE3EAE5E18AE305151111EAE1E5E315051AE3E5E856:200A0000E9E1150AE5E30AEBE5E5E1E2E3E2E5E5EAE315E51AE5E1E3E8E1858AE1EBE0E323:200A80003AE0E2E2E5EBE5E5E3E5E5E1E2E8E9E11508E5E30AEBE5E5E1E5E2E1E1939AE1A0:200B0000E5E3E0E2E18AEAE1E5051AE5E1E5130AE5E0E0E2E2E133E3151113E3151113E3B1:200B80001AE30AE1EBE5E5E0E2E5E1EAE31AE1EBE5E5E0E2EAE1EBE1EBE5E5E0E5E0E2E13D:200C0000E5EBE5E1E8E9E1E215E11AE1EBE1EAE3E51AEBE3E8E30AEBE5E5E1E5E5E2E1E378:200C8000E2E50AE2E10AE18AE5E5E5E0E0E2E1859AE11AE0E0E24AEBE330333531E53AE37A:200D0000E5E0E2E2E5E1EBEAE1EBE1E50AE1E1EBE1EBE5E1E1EAE1EAE0E33AE3E5E0E2E2D5:200D8000E3E5E2EBE5E1E1E8E9E1E1E20AE3859AE1E50AE1EBE1EAE30AEBE5E5E1E2E3E205:200E0000E5E5E5E1E30AE2E0E5E0E2E0E0E0E2EAE0E0E1303AE3455AE31AEAE31AE5E1E366:200E8000E8EBE3E1E5E20AE0E5EBE33530353AE0E2E5EBE5E1E1E8E9E0E1EBE10308E2E11E:200F0000E308E2E41AE800100000000010E2E3E5E2E31AE146E9E30AE1E042E212E1E1912E:200F8000E191E18AE18AE18AE18AE18AE18AE18AE1E020E1E020E1E020E1E020E1E020E1AC:20100000E020E1E020E1E020E1313AE1E14222E8E1E3E8E1E9E5E2EBE5E1E2EBE31AE3EA2F:20108000E3E8E9E5E2E5EBE31AE3EAE5E2EBE31AE3EAE5E2EBE31AE3EAE3E8E9E5E5E3E5FD:20110000E3E5EAE5EBE5E5E30AE5E2E5E3EFEAE5E2E5E3EFEAE5EBE30AE20AE5E5E8E9E59D:20118000E5E5E5E5E5E5E5E3EFE5E5E8E9E5E5E5E5E5E5E5E5E3EFE5E5E8E9E5E3E5E2E596:20120000E3E3EFE5E8E9E5E5E5E5E5E5E3EFE3E8E9E5E5E5E5E3E3EFE8E9E5E5E5E5E5E507:20128000E3EFE8E9E5E3E5E3E3EFE8E9E5E5E5E5E5E5E3EFE876A0767230A07664007664DE:1A13000000E3E20AE2E5E5E11011E3121AE3E1E2E2E5E5E0E30AE30AE1E179:1C1368000000333762666A6E72767A0000000000001000000000000000000000ED:00000001FF"

// IPC CLIENT APP
#define ipcclient_byte0 ":020000040002F8:20000000000029F090012D8C01087C0104003B0400FBF0110403070403040404FB04030194:200080000101FB0304020400EA1EFFFF6414010000000439FF3000B2000C0400040800039A:20010000040086B20100240484EF30010014040E011C2014001E0C001E1E0C0804000000E1:200180000098000C060001007C000CF8041E001C040000080C000AB11017180801081800BB:20020000181004180108181808049C05180C180C0400180C0704180C0108180C010CBC64BB:20028000A17418CF010718000C0A680C950148925890180C0A18080018B95B45204E5B4593:2003000074005B4F4820445D0AA0001E01032B032F10081010181810FB1010010C0D0C10C4:20038000030404010608080102080801010402010101B2B20100B2B201010101010101034A:20040000F9011302CB040704B423B204F9040102B2B2020101010104090404230323022379:200480000104F50401010101FB0101030700010103FB00011EFF01041201080D01100810DF:2005000001010F0F1210FC100802040402B20100011E1000003C040400000004000004EC5F:2005800000E8003C00CC0000090C0C0500040405041E040000F2001E8010000C0010000A4C:200600000004050000040003060204000004F000041070001812000000B7F0003C0703042B:20068000E000FF0000D803003C00700304F405B406080506040400BF00000100003C0470AF:20070000700060700000008938003C30040C030007030001000403F8FF03040036F08100A2:2007800001310001000404050000008C0000008C00000A0006056D00000C04000314000652:20080000066200000C0409065B055900000C000C08060063003C70F00004000103017200F8:20088000560000029A00F0000027B0003C00B407860304003201093E092F7C84000601045E:200900000004168C140C0904101A08030100070013010005040400051E1B0835000008071C:200980000667075B003C05B63CBA090809010005040401000449003C07F0F00001013104CB:200A00006802050003010A003D0000C528003C070304182000050016040A000C04070C0958:200A8000080103070C08FA00040200EB010003003C00F0B001070004020A00BB08000C007D:200B000003090400B2003C07F0109004C4000010032100100104FC10080000FC040CFC0E05:200B8000000000030000000100280004009D000C01080408001B0408000000000804000034:200C00000000040800000000040104080108080400E3000E0014080400000C000010020073:200C8000000000086E0C000C010C04010800640000EF1000050C010C042D00040C000C04DA:200D00009D14000C007C02B104040107003D000004CA04E40C0E040030019E0808010508D9:200D80000004C708D30E2F2F6900D40C0000040004DC040C0E04000008000408DA080E0EE0:200E00000400000800DB000408DF080E0100010100FB1E780C0038A1C0000200012002206C:200E800002A020201CA0172012A00D2008A0038203820203028203820203028203820203CB:200F0000028203820203020222E4038E00000C1E000C1E08009DB4000099A400010000013C:200F80000808009100A700010D0E008DA000010B0700899900010C0000080F04000008005B:201000000C1100DC0C0C011104080C0A010B04080014010500BC00E901F308000F0F08048E:2010800000080C0800040D010C000F0F080400080C0800040C010C000F0C00000404000090:201100000B01040C0E0804000800040301000E0C04000004001E010C0E0804000800041FF7:20118000010E08000000002001080E08040008000421010E2F002F2F69002F2F302F2F31A6:19120000000108010101030C1E0001F7001E010101010C000100F80C1E53:1C12640025D430343863676B6F73770004FC00040000040401040864040C64005A:00000001FF"
#define ipcclient_byte1 ":020000040002F8:200000000000004000000000000050000000004000FF80001000002000303020FF20003092:200080003020FF2020002000FFFFFFFF12C0000010001000FF4050C0400001001020000003:20010000001000C00048480001FF800000FFC040E0FF47C000FFC000FFFF1313D0C0C0C027:20018000C001C00000C0C0C001C000FFD0FF40D01000C0C000102000000100C0000000C0BE:20020000C00000C0000000C000C00001C000C0C00000C0C00000C0C00000C0C00000FF001E:20028000020010020000C00010200200020000020002C000010001C0C0FF434E5B44545D30:2003000065004552495349000D8600FF400000000000000020505020FF002080300020C09B:20038000F130308000101080005050802030F230308030308000303030308030302080008A:20040000FF000000FF20003030383020FF008020303020203030802000303034303430343B:200480003020FF2080303020FF8040000000102000FF0040FF10140000180000E0000000A4:2005000040C030205030FF00004000100010001040FFC6C040FF06C600C6C0C0C0C0C00541:20058000C0C5C0FF801520C00000200000C0C000C0FFC000C0FFC0FF1540C02000003000A0:20060000E00000000020C000003020004000FFC0C0804040C500C00000FFC4C0FFC0C06024:20068000C450FF00304400C0FF00800050FF00FFC000000000C0C0FF60C0C0C0C0FF008028:200700004050C480C00000FFC4C0FFC45030006000600000003000FFFF00441000032F000B:2007800010001010C050C0005000C0CF6000C0CF500000000000FFC000C0C0C0000000003C:2008000000FFC000C0C00000FF00FFC000C000C0C000C0FFC0FF80437050C3800000FF70E8:200880000000C000FF00830000FFC2C0FF6042C00FC090C0006000000000122210C01000A1:2009000000C0001F00C0C03000FF0000000050C000C0C0C050C0C000FF0000FF50C000100B:2009800020FE00FFC0FF00FFFFFF000000C0C0C050C0C0C000FFC0FF008347804050000016:200A0000C10000C00000FF70000000FEC1C0FFC0C090C16100100000A0C0207030C0C04046:200A8000C00030700040FF00000000FF000000C0FF0087FEC000C05000C0C0FE00C0C0C0E6:200B00000000C0C0FEC0FF0087400100FEC00080101120801020FF801320131213131F4045:200B800000C00000C0C000000000C0C00000C0C0C0C0C0000000C01000100000C010001015:200C00000000C01000100000C0C0C0C0C0C000C000FF008040D0201000C0C0C000C000C035:200C8000C0C0001000C100C0101010001000000010FFC00000C00000001010C00010100074:200D0000FFD080400000100000C0000000001020000000008040100000100000C0000000A4:200D800010200000008064736100124000C0C00010000080401000C0C00010200000804049:200E00001000C0C00000001020000080C000100000FFFF47400000E0E000311020082804E8:200E80002400000100010002000200030003000330030330030230020230020130010130EB:200F0000010030000030000024FF10E0100040FF0040FF40000FFF10200F00000000000042:200F80008040000F100000000000100F0000000000100F00000000000080401000C0C0C024:20100000C00000FF00C0000030102000000030102000000000FF00FF00FF000080402010A4:2010800000C0C0301020000000008040201000C0C030102000000000804000C0C010203000:201100000000008040201000301020000000804010001020300000804020100030102000FF:201180000080400020103000008040201000301020000080640064736100646C00646C0023:191200000010000030C00000FF0020FF00FF0010C020C0000000FF00FF0A:1C126400001231353964686C707478000012200013200013000013010013010089:00000001FF"
#define ipcclient_byte2 ":020000040002F8:200000000000002D9F70009F70009F750000009554FFBD009011005200908152FF9200D025:20008000C152FF1062809052FF2FFFFF029F7CA0A09C8C00FF2DA0D5A00080858091520020:20010000919100D584A0A05CA0FFBD14002FA0A08F2FC09F8C2F9F8C2F2F02024DA08DA06A:200180008D9F9D50009D8C8D9F9D50FF8D2F2D4D8D8DA08D8DA0A000A0008D9D8C8D9D80BB:200200009DA08C9DA08C9D9D909C00009D8C9D9CA08C9D9CA08C9D9CA08C9D9CA08CFF8F9B:20028000008F9D0050009D9C8DA0008D00008F008F009D9C009D00A08DFF4C54535D592006:20030000730052204C454E000001522F2D1100100052002D42B1A052FFBD92BD1200D24FA7:200380008C9180BD00B1A0BD00B1A0BD524F83D1C0BDD1C0BDA0D1C0D1C0BDD1C052BD11F7:20040000FF100010FF520091C0A04052FF72BD92D1C04292D1C0BD520091C0A040A040A073:200480004052FF92BDD1C052FFBD2D100052C05210FF52BD2F01815200815200A052002D29:20050000A0A04202A053FFBD12A0128012C012C0BD2F9F9C2D2F9F9F8C9F9C4C80A0809FAD:20058000809F9C2FBD9FA0910050A00052909000822F925CA0FF812F9F2D91B08100A00066:20060000905E00538180A0A000A093529283FFA080BD2DB09F009C5C00FF9F9C2F84CC4C69:200680009F9CFF55959F00942FA0BD5695FFA0FF435C0085804C80FF85958C85942F85BD4F:200700002DB09FBD9C5C00FF9F9C2F9F45A055A000A096C0838055FFFF559F93009FB09014:20078000C10083838C814C5CA05696B0A05595B0A056005500A0FF9395808C83A0005500D1:20080000A0FF9693808C00A0FFA0FF96938095808CA086FF942FBD2DB0479FA000A0FFA035:2008800000589C00FFA0BD5C00FF9F9C2F959F88B0CC4C940046560056009F9F9185828CD7:20090000519C00B000864C9C00FF53898085A094008985898C4385A0FF00A0FFB09400A0AB:20098000A0FFA0FF942FA0FF2FFF4650008985898C408C8585FF942FA0BD2DA0B0480058BE:200A00009F00189C00A0FFA0005C00FF9F9C2F84CC4C9F9F9CE0500080859001474A824CE4:200A8000800088885344FF54900050FF005000962FA0BDFF895A8347004580FF5495848529:200B000000874480FF962FA0BD2D04A0FFB0A0BD84B0A0BD518CFFBD020002020202002D2B:200B80008D9D5C009DDC5C009D009D8D9D009D804C8D9D9D5C009D9DDCD121CC9D9DDCD14F:200C000021CC9D9DDCD121CC9D8C8D9D4C8D9D9D5CFF9DBD2D4D8D8D8DA08D9D5C8D009D87:200C80006C8D9D9D009FDC9D8C8D9DCC9D9D00518DFF9D5C009D8C8D9DA0CC9D9DA0C09D81:200D0000FF8DBD2D8D8FA0008D9D7C009D009DA09D009D00BD2D8D8D8FA0008D9D7C009D71:200D80009D9D009D00BD65656C00022D8DA08D9D8D009DBD2D8D8DA08D9D9D8D009DBD2D5A:200E00008D8DA08D9D009D9D8D009DBD40E0FC8051FF2FC02D5100A03E601161B052A052D0:200E8000A0520052005200520052005200520050A34050A34050A34050A34050A34050A382:200F00004050A34050A34051A0FFA0B06360BD2FA0BD2F2D8D8FFF9DA08F005000A000A00C:200F8000BD2D8D8F9D005000A0009D8F005000A0009D8F005000A000E0BD2D8D8DE08DE055:201000008D009DFF8D9D7C009D8D9DA000009D8D9DA000009DFF50FF50FF9D8DBD2D8D8DCB:201080008D9D8D9D9D9DA0009D8DBD2D8D8D8D9D8D9D9D9DA0009D8DBD2D8DA08D8D9DA02E:20110000A0009DBD2D8DCD8D9D9DDDA000E0BD2D8D8D9D9DA0A000BD2D8D8D8D9D9D9DA0A4:2011800000BD2D8DA09DA0A000BD2D8D8D8D9D9D9DA000BD650065656C0065650065650067:1912000052410040F0F15C432F5C52FFA02F4041F1F04252005CFFA02FB7:1C126400000232366165696D7175790000020000020000020000020200020200FB:00000001FF"
#define ipcclient_byte3 ":020000040002F8:2000000010EBEBE9E5E31BE5E31BE5E30AEAEBE4E31AE8EAE4E31AE24AE4E4E25AE20AE410:20008000E4E21AE21210E4E31AE1FFFF00E5E303011512EAFFE9E1E1E3EAE0E0E2E5E30AF4:20010000E5E5EBE1E2E1E1E1E1CAE8E31AE1E1E1E2E146E5E5E1E5E5E1E10000E2E3E5E3C4:20018000E5E5E5E1DAE5E2E5E5E5E1CAE2E1E9E2E5E5E3E5E2E3E3EBE3EBE5E5E2E5E5E5F8:20020000E5E3E5E5E3E5E5E5E5E5E0EBE5E5E5E5E3E5E5E5E3E5E5E5E3E5E5E5E3E5EBE246:20028000EBE2E5EBE31AE5E5E2E3EBE2EBEAE2EBE2EBE5E5EBE5EBE3E5EA495D4520500067:2003000074A05257454E47000000E301E9E31AE31AE33AE9E2E8E8E22AE8E208E20AE3E238:20038000E0E4E408EAE8E808EAE8E808E21210E4E4E8E0E0E8E1E0E0E4E4E8E4E4E208E3E7:200400001AE31AE30AE23AE4E0E1E1E22AE308E2202022E22424E8E23AE4E4E1E5E1E5E198:20048000E5E22AE208E4E4E21AE8E9E30AE38482831AE30801E2E1E33AE1E33AE1E33AE9C8:20050000E1E1E2E2E8E28AE8E318E314E310E315E8E1E5E5E9E1E5E5E5E5E5E2E5E3E5E5F2:20058000E5E5E5E1E8E5E3E5EAE1111AE305150AE5E1E5E3031AE5E1E5E9E5E1050AE3EA58:20060000E5E18AE305151111EAE1E5E315051AE3E5E8E9E1150AE5E30AEBE5E5E1E2E3E2FC:20068000E5E5EAE315E51AE5E1E3E8E1858AE1EBE0E33AE0E2E2E5EBE5E5E3E5E5E1E2E8CF:20070000E9E11508E5E30AEBE5E5E1E5E2E1E1939AE1E5E3E0E2E18AEAE1E5051AE5E1E584:20078000130AE5E0E0E2E2E133E3151113E3151113E31AE30AE1EBE5E5E0E2E5E1EAE31A98:20080000E1EBE5E5E0E2EAE1EBE1EBE5E5E0E5E0E2E1E5EBE5E1E8E9E1E215E11AE1EBE1E5:20088000EAE3E51AEBE3E8E30AEBE5E5E1E5E5E2E1E3E2E50AE2E10AE18AE5E5E5E0E0E289:20090000E1859AE11AE0E0E24AEBE330333531E53AE3E5E0E2E2E5E1EBEAE1EBE1E50AE1B6:20098000E1EBE1EBE5E1E1EAE1EAE0E33AE3E5E0E2E2E3E5E2EBE5E1E1E8E9E1E1E20AE35C:200A0000859AE1E50AE1EBE1EAE30AEBE5E5E1E2E3E2E5E5E5E1E30AE2E0E5E0E2E0E0E0A0:200A8000E2EAE0E0E1303AE3455AE31AEAE31AE5E1E3E8EBE3E1E5E20AE0E5EBE3353035DB:200B00003AE0E2E5EBE5E1E1E8E9E0E1EBE10308E2E1E308E2E41AE800100000000010E97A:200B8000E5E5E30AE5E5E31AE5EAE5E5E5EBE5E0E2E5E5E5E12AE5E5E5E5E0E5E5E5E5E520:200C0000E0E5E5E5E5E5E0E5E5E2E5E5E2E5E5E5E13AE5E8E9E2E5E5E5E3E5E5E3E55AE57E:200C8000E2E5E5E5EBE5E7E5E2E5E5E7E5E5EBE3E5CAE5E35AE5E2E5E5E3E7E5E5E3E7E557:200D0000EBE2E8E9E5E2E3EBE5E5E30AE5EBE5E1E5EBE5EBE8E9E5E5E2E3EBE5E5E30AE5CC:200D8000E5E5EBE5EBE8767230A000E9E5E3E5E5E2EBE5E8E9E5E5E3E5E5E5E2EBE5E8E951:200E0000E5E5E3E5E5EBE5E5E2EBE5E8E2E3E5E2E31AE146E9E30AE1E042E212E1E191E15B:200E800091E18AE18AE18AE18AE18AE18AE18AE1E020E1E020E1E020E1E020E1E020E1E0AE:200F000020E1E020E1E020E1313AE1E14222E8E1E3E8E1E9E5E2EBE5E1E2EBE31AE3EAE32D:200F8000E8E9E5E2E5EBE31AE3EAE5E2EBE31AE3EAE5E2EBE31AE3EAE3E8E9E5E5E3E5E3FE:20100000E5EAE5EBE5E5E30AE5E2E5E3EFEAE5E2E5E3EFEAE5EBE30AE20AE5E5E8E9E5E59C:20108000E5E5E5E5E5E5E3EFE5E5E8E9E5E5E5E5E5E5E5E5E3EFE5E5E8E9E5E3E5E2E5E399:20110000E3EFE5E8E9E5E5E5E5E5E5E3EFE3E8E9E5E5E5E5E3E3EFE8E9E5E5E5E5E5E5E308:20118000EFE8E9E5E3E5E3E3EFE8E9E5E5E5E5E5E5E3EFE876A0767230A0766400766400C2:19120000E3E20AE2E5E5E11011E3121AE3E1E2E2E5E5E0E30AE30AE1E17B:1C1264000000333762666A6E72767A0000000000001000000000000000000000F2:00000001FF"



void user_app_test() {
  code_bytes_t code_bytes;

  irq_disable();
  mmu_init();


  devices_init();
  process_table_init();
  irq_init();
  timer_init();

//  code_bytes.byte_0 = led_1_byte0;
//  code_bytes.byte_1 = led_1_byte1;
//  code_bytes.byte_2 = led_1_byte2;
//  code_bytes.byte_3 = led_1_byte3;
//
//  process_create(1, &code_bytes);
//
// code_bytes.byte_0 = byte0_;
// code_bytes.byte_1 = byte1_;
// code_bytes.byte_2 = byte2_;
// code_bytes.byte_3 = byte3_;
//
// process_create(1, &code_bytes);

  code_bytes.byte_0 = ipcserver_byte0;
  code_bytes.byte_1 = ipcserver_byte1;
  code_bytes.byte_2 = ipcserver_byte2;
  code_bytes.byte_3 = ipcserver_byte3;

  process_create(1, &code_bytes);

  code_bytes.byte_0 = ipcclient_byte0;
  code_bytes.byte_1 = ipcclient_byte1;
  code_bytes.byte_2 = ipcclient_byte2;
  code_bytes.byte_3 = ipcclient_byte3;

  process_create(1, &code_bytes);

  irq_register_context_switch();
  irq_enable();

  //mmu_init_memory_for_process(process_table[0]);
  //asm(" MOV R0, #131072");
  //asm(" MOV PC, #131072");

  kernel_to_user_mode();
}

void tty_start() {
	// load tty process
	code_bytes_t* code = code_get_single_file("/bin/ottsh");
	if(code == NULL) {
		kernel_panic("Cannot start tty");
		return;
	}
	process_create(1, code);

	// TODO (thomas.bargetz@gmail.com) implement code_free function
	free(code->byte_0);
	free(code->byte_1);
	free(code->byte_2);
	free(code->byte_3);
	free(code);
}

void startup() {
	irq_disable();

	irq_init();
	timer_init();
	process_table_init();
	devices_init();
	mmchs_init();
	fs_init();
	mmu_init();

	tty_start();

	irq_register_context_switch();
	irq_enable();
	kernel_to_user_mode();
}

int main(int argc, char **argv) {
  // these methods has to be called for EVERY test method
//  irq_disable();
//  process_table_init();
//  devices_init();

  // these methods are the specific tests for every module
  //  process_test();
  //  timer_test();
  //  serial_test();
  //  serial_test_calc();
  //  process_exit_test();
  //  fs_test();
  //  i2c_test();
  //  uptime_test();
  //  tty_test();
  //  system_time_test();
  //  uptime_test();
  //video_test();
 //  user_app_test();
  startup();

  // do an endless loop
  loop_forever();

	return 0;
}
